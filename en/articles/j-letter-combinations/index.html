<!DOCTYPE html>

<html>

<head>
  <title>Calculating possible letter combinations in J&ensp;&dagger;&ensp;Tadeáš Souček</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" type="image/png" href="/favicon.png">

  <link rel="stylesheet" href="/css/general.css">
  
    <link rel="stylesheet" href="/css/post.css">
    
      
        <link rel="stylesheet" href="/css/code.css">
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
      
    
  
</head>

<body id="top">
  <header>
    <nav>
      <a href="/en">Home</a>
      <a href="/en/articles">Articles</a>
      <a href="/en/stories">Stories</a>
      <a href="/en/about">About</a></nav>
  </header>

  <main>
    
<header class="post-header">
  
  
    <ul class="breadcrumbs"><li><a href="/en/articles/">Articles</a></li></ul>
  

  <h1 id="title">Calculating possible letter combinations in J</h1>

  

  

<ul class="tags">
  <li>programming</li><li>j</li>
</ul>



  <aside>
    <time datetime="Wed, 14 Apr 2021 00:00:00 GMT">14/4/2021</time>
  </aside>
</header>



  <div class="tldr-link">
    <a href="#tldr">(Jump to TL;DR)</a>
  </div>


<p>Suppose we have a word with the length of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span> and we want to calculate the number of ways we can rearrange its letters. How would we do that? Well, with the following formula:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>=</mo><mfrac><mrow><mi>l</mi><mo>!</mo></mrow><mrow><msub><mo>∏</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow></msub><msub><mi>r</mi><mi>i</mi></msub><mo>!</mo></mrow></mfrac><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">a = \frac{l!}{\prod_{i=1} r_i!},
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.37144em;"></span><span class="strut bottom" style="height:2.35745em;vertical-align:-0.98601em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">a</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∏</span><span class="vlist"><span style="top:0.30001em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">!</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mclose">!</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mpunct">,</span></span></span></span></span></p>
<p>where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span> is a single-row matrix of the number of occurrences of each letter that occurs more than once.</p>
<p>That was a very convoluted sentence, so let’s take an example: if we wanted to calculate the anagrams of the word <code>MISSISSIPPI</code>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span> would look like this:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mi>l</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mn>1</mn><mn>1</mn></mrow></mtd></mtr><mtr><mtd><mrow><mi>r</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mrow><mn>4</mn></mrow></mtd><mtd><mrow><mn>4</mn></mrow></mtd><mtd><mrow><mn>2</mn></mrow></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}
  l &amp;= 11 \\
  r &amp;= \begin{bmatrix}
    4 &amp; 4 &amp; 2
  \end{bmatrix}
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.455em;"></span><span class="strut bottom" style="height:2.41em;vertical-align:-0.9550000000000001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-0.615em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span><span style="top:0.595em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-0.615em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">1</span></span></span><span style="top:0.595em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist"><span style="top:-0.010000000000000009em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist"><span style="top:-0.010000000000000009em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist"><span style="top:-0.010000000000000009em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span>​</span></span></span></span></span></span></span></span></span></p>
<p>Why is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mrow><mn>4</mn></mrow></mtd><mtd><mrow><mn>4</mn></mrow></mtd><mtd><mrow><mn>2</mn></mrow></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">r = \begin{bmatrix} 4 &amp; 4 &amp; 2 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8500000000000001em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">=</span><span class="minner textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist"><span style="top:-0.010000000000000009em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle uncramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist"><span style="top:-0.010000000000000009em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle uncramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist"><span style="top:-0.010000000000000009em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span></span>? Because the letters <code>I</code> and <code>S</code> occur 4 times each and the letter <code>P</code> occurs twice.</p>
<p>Now, plugging <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span> into our equation we get:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mi>a</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mi>l</mi><mo>!</mo></mrow><mrow><msub><mo>∏</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow></msub><msub><mi>r</mi><mi>i</mi></msub><mo>!</mo></mrow></mfrac></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mn>1</mn><mn>1</mn><mo>!</mo></mrow><mrow><mn>4</mn><mo>!</mo><mo>⋅</mo><mn>4</mn><mo>!</mo><mo>⋅</mo><mn>2</mn><mo>!</mo></mrow></mfrac></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mn>3</mn><mn>4</mn><mspace width="0.16667em"></mspace><mn>6</mn><mn>5</mn><mn>0</mn></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}
  a &amp;= \frac{l!}{\prod_{i=1} r_i!} \\[1.5em]
    &amp;= \frac{11!}{4! \cdot 4! \cdot 2!} \\[1.5em]
    &amp;= 34\,650
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:4.081440000000001em;"></span><span class="strut bottom" style="height:7.66288em;vertical-align:-3.5814399999999997em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-2.710000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">a</span></span></span><span style="top:0.5214399999999995em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:3.22144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-2.710000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∏</span><span class="vlist"><span style="top:0.30001em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">!</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mclose">!</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span><span style="top:0.5214399999999995em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">4</span><span class="mclose">!</span><span class="mbin">⋅</span><span class="mord mathrm">4</span><span class="mclose">!</span><span class="mbin">⋅</span><span class="mord mathrm">2</span><span class="mclose">!</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mclose">!</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span><span style="top:3.22144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathrm">3</span><span class="mord mathrm">4</span><span class="mord mspace thinspace"></span><span class="mord mathrm">6</span><span class="mord mathrm">5</span><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></span></span></span></p>
<p>There we go! It’s easy to implement this solution in any number of programming languages, but I would like to focus on a very particular one: J.</p>
<p>J is a high-level analytical language famous for its complicated syntax. <a href="https://joebo.github.io/j-emscripten/">You can try it out here.</a> Please note that it’s very difficult to understand and harder still to master, and this article is meant to be a very limited, very brief introduction. For an <em>actual</em> introduction, check out the <a href="https://www.jsoftware.com/help/primer/contents.htm">J Primer</a>.</p>
<p>Now, onto the programming. What you need to know about J is that its main unit is a <em>sentence</em>. In other languages it’s usually called a statement, here it’s a sentence. A sentence is made up of nouns, pronouns, verbs, adverbs, adjectives and conjunctions — in short, <em>words</em>.</p>
<p><em>Nouns</em> signify values. There are a couple of basic values:</p>
<ol>
<li>Numbers like <code>0</code>, <code>1</code>, <code>3.14</code> or <code>9e10</code>. A number cannot start with a dot (so <code>.1</code> is different from <code>0.1</code>). An underscore (<code>_</code>) at the beginning of a number signifies that it’s negative (so for example <code>_1</code>, <code>_3.14</code> or <code>_8e_9</code> [<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mn>8</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>9</mn></mrow></msup></mrow><annotation encoding="application/x-tex">-8 \cdot 10^{-9}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord">−</span><span class="mord mathrm">8</span><span class="mbin">⋅</span><span class="mord mathrm">1</span><span class="mord"><span class="mord mathrm">0</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord">−</span><span class="mord mathrm">9</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>]). A single underscore (<code>_</code>) is infinity and two underscores (<code>__</code>) is negative infinity.</li>
<li>Strings are enclosed in apostrophes (<code>&#x27;</code>) — <code>&#x27;hello, world!&#x27;</code> or <code>&#x27;&#x27;</code> are valid strings. If you want to use an an apostrophe inside of a string, double it: <code>&#x27;it&#x27;&#x27;s a beautiful day, isn&#x27;&#x27;t it?&#x27;</code>.</li>
<li>Lists of numbers are created by simply separating a bunch of numbers with spaces: <code>12 34 56 7 8 _1</code>.</li>
</ol>
<p><em>Verbs</em> (similar to operators in other languages) are words that signify an action, so for example the <em>plus</em> verb (<code>+</code>) or the <em>minus</em> verb (<code>-</code>). Every verb has a <em>monadic</em> and <em>dyadic</em> form. The <em>monadic</em> form is applied to one parameter (<code>v x</code>), while the <em>dyadic</em> form is applied to two parameters (<code>a v b</code>). Here is a couple of verbs (see <a href="https://www.jsoftware.com/help/dictionary/vocabul.htm">the J vocabulary</a> for full list):</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Monadic</th>
<th>Dyadic</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>Conjugate</td>
<td>Plus</td>
</tr>
<tr>
<td><code>-</code></td>
<td>Negate</td>
<td>Minus</td>
</tr>
<tr>
<td><code>*</code></td>
<td>Signum</td>
<td>Times</td>
</tr>
<tr>
<td><code>%</code></td>
<td>Reciprocal</td>
<td>Divide</td>
</tr>
</tbody>
</table>
<p>One thing that it’s important to know is that verbs have no precedence and are right-associative; for instance, this J code:</p>
<pre><code class="hljs language-j">1 * 2 % 3 + 4
</code></pre>
<p>is equivalent to this math equation:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>⋅</mo><mo>(</mo><mn>2</mn><mo>÷</mo><mo>(</mo><mn>3</mn><mo>+</mo><mn>4</mn><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">1 \cdot (2 \div (3 + 4))
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">⋅</span><span class="mopen">(</span><span class="mord mathrm">2</span><span class="mbin">÷</span><span class="mopen">(</span><span class="mord mathrm">3</span><span class="mbin">+</span><span class="mord mathrm">4</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p>
<p>If you want to change this order, you have to do so explicitly by using parentheses; for example, this code</p>
<pre><code class="hljs language-j">((1 * 2) % 3) + 4
</code></pre>
<p>is equivalent to:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>1</mn><mo>⋅</mo><mn>2</mn><mo>)</mo><mo>÷</mo><mn>3</mn><mo>+</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">(1 \cdot 2) \div 3 + 4
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">⋅</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="mbin">÷</span><span class="mord mathrm">3</span><span class="mbin">+</span><span class="mord mathrm">4</span></span></span></span></span></p>
<p>Now, let’s write our anagram-counting program.</p>
<hr>
<p>First, we need to store the word. That can be done simply with an assignment:</p>
<pre><code class="hljs language-j">   word =: 'MISSISSIPPI'
</code></pre>
<p>Notice how no value is printed; this is because the <a href="https://www.jsoftware.com/help/dictionary/d001.htm">dyadic <em>global copula</em> (<code>=:</code>)</a> doesn’t return its value. This isn’t a problem here, because we can see the assigned string in front of us. In more complex sentences however, we might want to see what the assigned value is. For this, we will use the <a href="https://www.jsoftware.com/help/dictionary/d500.htm">monadic <em>same</em> verb (<code>]</code>)</a> to inspect it.</p>
<p>Next thing we need to do is to calculate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span>. That is, fortunately, very easily done with the <a href="https://www.jsoftware.com/help/dictionary/d400.htm">monadic <em>tally</em> verb (<code>#</code>)</a>, which returns the length of its parameter.</p>
<pre><code class="hljs language-j">   ] l =: # word
11
</code></pre>
<p>Now, onto <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span>. That is a little more complicated. First, we need to take all of the distinct letters in the word. For that, we can use the <a href="https://www.jsoftware.com/help/dictionary/d221.htm"><em>nub</em> verb (<code>~.</code>)</a>:</p>
<pre><code class="hljs language-j">   ] distinct_letters =: ~. word
MISP
</code></pre>
<p>This selects all distinct letters while discarding the rest and assigns this new string to <code>distinct_letters</code>. Next, with the <a href="https://www.jsoftware.com/help/dictionary/didot.htm">dyadic <em>index of</em> verb (<code>i.</code>)</a>, we’ll take these letters in the original word and replace each one with its index in <code>distinct_letters</code> (so <code>M</code>s will be replaced with <code>0</code>s, <code>I</code>s with <code>1</code>s and so on):</p>
<pre><code class="hljs language-j">   ] linked_letters =: distinct_letters i. word
0 1 2 2 1 2 2 1 3 3 1
</code></pre>
<p>With <code>linked_letters</code> defined, we can calculate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span> using the <a href="https://www.jsoftware.com/help/dictionary/d421.htm">dyadic <em>key</em> verb (<code>/.</code>)</a> combined with the <a href="https://www.jsoftware.com/help/dictionary/d400.htm">dyadic <em>copy</em> verb (<code>#</code>)</a>:</p>
<pre><code class="hljs language-j">   ] r =: linked_letters #/. word
1 4 4 2
</code></pre>
<p>Heureka! Here are our letter frequencies! Although, you might have noticed that in spite of our definition of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span> at the beginning of this article as “a single-row matrix of the number of occurrences of each letter that occurs more than once,” we included <code>1</code>s in our programmatic definition of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span>. This, of course, doesn’t matter because <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>!</mo><mi>n</mi><mo>=</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1!n = n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mclose">!</span><span class="mord mathit">n</span><span class="mrel">=</span><span class="mord mathit">n</span></span></span></span>, but if we wanted to filter them out anyway, we can do so using the <code>(~: # ])</code> fork:</p>
<pre><code class="hljs language-j">   ] r =: 1 (~: # ]) linked_letters #/. word
4 4 2
</code></pre>
<p>If you want to know how the fork works, I would recommend reading <a href="https://stackoverflow.com/a/2865675">the StackOverflow question I got it from,</a> but in a nutshell, it keeps only values that are not equal (<code>~:</code>) to 1.</p>
<p>The last thing that’s left to do is to calculate the actual amount of anagrams using our original formula. To calulate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mo>!</mo></mrow><annotation encoding="application/x-tex">l!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mclose">!</span></span></span></span> we’re going to use the <a href="https://www.jsoftware.com/help/dictionary/d410.htm"><em>factorial</em> verb (<code>!</code>)</a> and to calculate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>∏</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow></msub><msub><mi>r</mi><mi>i</mi></msub><mo>!</mo></mrow><annotation encoding="application/x-tex">\prod_{i=1} r_i!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.0500099999999999em;vertical-align:-0.30001em;"></span><span class="base textstyle uncramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∏</span><span class="vlist"><span style="top:0.30001em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">!</span></span></span></span>, we’re going to combine the <a href="https://www.jsoftware.com/help/dictionary/d420.htm"><em>insert</em> verb (<code>/</code>)</a> with the <a href="https://www.jsoftware.com/help/dictionary/d110.htm"><em>times</em> verb (<code>*</code>)</a>:</p>
<pre><code class="hljs language-j">   (! l) % */ ! r
34650
</code></pre>
<p>Again, verbs are right-associative, so what we wrote there is equivalent to:</p>
<pre><code class="hljs language-j">(! l) % (*/ (! r))
</code></pre>
<p>The <em>factorial</em> verb is going to give us a list of the factorials of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span>. Then, the <em>insert</em> verb takes the <em>times</em> verb and puts it between all of them, effectively doing this:</p>
<pre><code class="hljs">4 4 2 =&gt; 4! 4! 2! =&gt; 4! * 4! * 2!
</code></pre>
<div class="tldr" id="tldr"><p>And with that, we’re finished! Let’s review our program:</p>
<pre><code class="hljs language-j">word =: 'MISSISSIPPI'
l =: #word
distinct_letters =: ~. word
linked_letters =: distinct_letters i. word
r =: 1 (~: # ]) linked_letters #/. word
(! l) % */ ! r
</code></pre>
<p>Or, if you prefer shorter programs:</p>
<pre><code class="hljs language-j">word =: 'MISSISSIPPI'
(!#word) % */ ! 1 (~: # ]) ((~. word) i. word) #/. word
</code></pre>
</div>

  </main>

  <footer>
    
      <div>
        <a target="blank" href="https://github.com/tadeassoucek/my-site/issues/new?title=&quot;Calculating possible letter combinations in J%22%20%E2%80%94%20%5BYOUR%20CORRECTION%20TITLE%20HERE%5D&body=%5BYOUR%20CORRECTION%20HERE%5D&labels=correction">
          Issue a correction.</a>

        <a target="blank" href="https://github.com/tadeassoucek/my-site/issues/new?title=&quot;Calculating possible letter combinations in J%22%20%E2%80%94%20%5BYOUR%20QUESTION%20TITLE%20HERE%5D&body=%5BYOUR%20QUESTION%20HERE%5D&labels=question">
          Ask a question.
        </a>
      </div>
    

    <a href="#top">
      Back to top
    </a>
  </footer>
</body>

</html>
