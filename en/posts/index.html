<!DOCTYPE html>

<html>

<head>
  <title>Posts
    &bull; Tadeáš Souček
  </title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&family=Spectral:ital,wght@0,400;0,700;1,400;1,700&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

  <link rel="shortcut icon" type="image/png" href="/favicon.png">

  <link rel="stylesheet" href="/css/general.css">
  
    <link rel="stylesheet" href="/css/post-list.css">
  

  
    <script src="/js/script.js"></script>
  
</head>

<body id="top" theme="classic">
  <header>
    <nav>
      <a href="/en">Home</a>
      
      <a href="/en/articles">Articles</a>
      <a href="/en/prose">Prose</a>
      <a href="/en/poetry">Poetry</a>
      <a href="/en/about">About</a>
      
      
        <a class="translation-link" href="/cs/posty">Česky</a>
      
    </nav>

    <script>
      var nodes = document.querySelectorAll("body>header>nav>a");
      nodes[1].href = "/en/posts?collections=articles";
      nodes[2].href = "/en/posts?collections=prose";
      nodes[3].href = "/en/posts?collections=poetry";
    </script>
  </header>

  <main>
    
<script src="/js/fuzzysort.js"></script>

<h1 id="title">Posts</h1>

<template id="post-link-template">
  <div class="post-link">
    <span class="lang"></span>
    <a class="title"></a>
    <span role="doc-subtitle" class="subtitle"></span>
    <div class="translations"></div>
    <time pubdate></time>
  </div>
</template>

<script>
  window.params = {};
  window.location.href.replace(
    /[?&]+([^=&]+)=([^&]*)/gi,
    function (m, key, value) {
      params[key] = key == "collections" ? value.split(",") : value;
    }
  );
  params.collections ||= ['articles', 'prose', 'poetry'];

  function capitalize(s) {
    if (!s) return s;
    return s[0].toLocaleUpperCase() + s.substring(1);
  }

  var obj = {
    articles: 'articles',
    prose: 'prose',
    poetry: 'poetry',
  };

  function setTitle() {
    q(".title").textContent = "Posts";
  }

  var fieldset = document.createElement("fieldset");
  q("main", document.main).appendChild(fieldset);
  var checkboxDiv = document.createElement("div");
  fieldset.appendChild(checkboxDiv);

  for (var key in obj) {
    var div = document.createElement("div");
    checkboxDiv.appendChild(div);

    var checkbox = document.createElement("input");
    // IIFE
    !(function (checkbox) {
      div.appendChild(checkbox);
      checkbox.type = "checkbox";
      checkbox.id = checkbox.name = key + "-checkbox";
      checkbox.value = key;
      checkbox.checked = (params.collections || []).includes(key);
      checkbox.oninput = function () {
        var col = params.collections;
        if (checkbox.checked) {
          if (!col.includes(checkbox.value)) col.push(checkbox.value);
        } else if (col.includes(checkbox.value))
          params.collections = col.filter((c) => c != checkbox.value);

        if (params.collections.length == 1)
          q("#title").textContent = capitalize(obj[params.collections[0]]);
        else q("#title").textContent = 'Posts';

        if (onSearch) onSearch();
      };
    })(checkbox);

    var label = document.createElement("label");
    div.appendChild(label);
    label.htmlFor = checkbox.id;
    label.textContent = capitalize(obj[key]);
  }

  window.searchbox = document.createElement("input");
  fieldset.appendChild(searchbox);
  searchbox.type = "text";
  searchbox.placeholder = 'Search...';
  searchbox.id = "searchbox";
  searchbox.value = params.q || "";
  searchbox.focus();
</script>

<div class="posts">
  <script>
    var posts = [
      
        
          {
            lang: {
              locale: "en",
              name: 'In english',
              show: false
            },
            collection: 'poetry',
            tags: [
              
            ],
            title: "abc",
            url: "/en/poetry/abc/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Tue, 01 Jun 2021 00:00:00 GMT")
          },
        
      
        
          {
            lang: {
              locale: "cs",
              name: 'Česky',
              show: true
            },
            collection: 'poetry',
            tags: [
              
            ],
            title: "O Nezachytitelnosti Pravidel Přírodních Jazyků",
            url: "/cs/poezie/o-nezachytitelnosti-pravidel-prirodnich-jazyku/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Tue, 01 Jun 2021 00:00:00 GMT")
          },
        
      
        
          {
            lang: {
              locale: "cs",
              name: 'Česky',
              show: true
            },
            collection: 'poetry',
            tags: [
              
            ],
            title: "Křehký dvojník",
            url: "/cs/poezie/krehky-dvojnik/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Tue, 01 Jun 2021 00:00:00 GMT")
          },
        
      
        
          {
            lang: {
              locale: "cs",
              name: 'Česky',
              show: true
            },
            collection: 'poetry',
            tags: [
              
            ],
            title: "Enestejža",
            url: "/cs/poezie/enestejza/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Fri, 26 Mar 2021 00:00:00 GMT")
          },
        
      
        
          {
            lang: {
              locale: "en",
              name: 'In english',
              show: false
            },
            collection: 'poetry',
            tags: [
              
            ],
            title: "Capitol",
            url: "/en/poetry/capitol/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Thu, 07 Jan 2021 00:00:00 GMT")
          },
        
      
        
          {
            lang: {
              locale: "cs",
              name: 'Česky',
              show: true
            },
            collection: 'poetry',
            tags: [
              
            ],
            title: "Jeden-dva",
            url: "/cs/poezie/jeden-dva/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Thu, 17 Dec 2020 00:00:00 GMT")
          },
        
      
        
          {
            lang: {
              locale: "en",
              name: 'In english',
              show: false
            },
            collection: 'poetry',
            tags: [
              
            ],
            title: "Skyscraper",
            url: "/en/poetry/skyscraper/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Mon, 07 Dec 2020 00:00:00 GMT")
          },
        
      
        
          {
            lang: {
              locale: "en",
              name: 'In english',
              show: false
            },
            collection: 'poetry',
            tags: [
              
            ],
            title: "Homunculus",
            url: "/en/poetry/homunculus/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Fri, 08 May 2020 00:00:00 GMT")
          },
        
      
        
      
        
          {
            lang: {
              locale: "en",
              name: 'In english',
              show: false
            },
            collection: 'prose',
            tags: [
              
            ],
            title: "Informed Decision",
            url: "/en/prose/informed-decision/",
            subtitle: "",
            translations:
              [
                
                  {
                    lang: "cs",
                    url: "proza/informovane-rozhodnuti"
                  }
                
              ],
            date: new Date("Sat, 03 Apr 2021 00:00:00 GMT")
          },
        
      
        
          {
            lang: {
              locale: "en",
              name: 'In english',
              show: false
            },
            collection: 'articles',
            tags: [
              
                "programming",
              
                "html",
              
            ],
            title: "Poetry in HTML",
            url: "/en/articles/poetry-in-html/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Fri, 07 May 2021 00:00:00 GMT")
          },
        
      
        
          {
            lang: {
              locale: "en",
              name: 'In english',
              show: false
            },
            collection: 'articles',
            tags: [
              
                "programming",
              
                "j",
              
            ],
            title: "Calculating possible letter combinations in J",
            url: "/en/articles/j-letter-combinations/",
            subtitle: "",
            translations:
              [
                
              ],
            date: new Date("Wed, 14 Apr 2021 00:00:00 GMT")
          },
        
      
    ];

    var postsSearchable = posts.map(function(post) {
      return {
        original: post,
        collection: post.collection,
        title: post.title,
        subtitle: post.subtitle || "",
        langFull: post.lang.name,
        locale: post.lang.locale,
        tags: post.tags.toString()
      };
    });

    var template = q("#post-link-template");
    var postsDiv = q(".posts");
    var templatesAvailable = 'content' in document.createElement('template');

    function render(searchResults) {
      postsDiv.textContent = "";

      if (!searchResults.length) {
        postsDiv.innerHTML = '<div class="no-results">No results found.</div>';
        return;
      }

      searchResults.forEach(function(result) {
        var post = "obj" in result ? result.obj.original : result;

        var prepared = {
          title: post.title,
          subtitle: post.subtitle,
          langFull: post.lang.name
        };

        if (result[0])
          prepared.title = fuzzysort.highlight(result[0], '<mark>', '</mark>');
        else if (result[1])
          prepared.subtitle = fuzzysort.highlight(result[1], '<mark>', '</mark>');

        if (templatesAvailable) {
          // create a clone of the template element
          var clone = template.content.cloneNode(true);

          if ((post.lang || {}).show)
            q(".lang", clone).textContent = post.lang.name;
          else
            q(".lang", clone).remove();

          var title = q(".title", clone);
          title.setAttribute("href", post.url);
          title.innerHTML = prepared.title;

          q(".subtitle", clone).innerHTML = prepared.subtitle;

          var translations = q(".translations", clone);
          (post.translations || []).forEach(function(t) {
            var child = document.createElement("a");
            child.setAttribute("href", '/' + t.lang + '/' + t.url);
            child.classList.add("translation-link");
            child.textContent = t.lang == "cs" ? "Česky" : "In english";
            translations.appendChild(child);
          });

          var time = q("time", clone);
          time.setAttribute("datetime", post.date);
          time.textContent = post.date.getDate() + '/' + (post.date.getMonth() + 1) + '/' + post.date.getFullYear();

          postsDiv.appendChild(clone);
        }
        else {
          var html =
            '<div class="post-link">' +
            (post.lang ? '<span class="lang">' + post.lang + '</span>' : '') +
            '<a class="title" href="' + post.url + '">' + post.title + '</a>' +
            '<span role="doc-subtitle" class="subtitle">' + post.subtitle + '</span>' +
            '<div class="translations">';

          (post.translations || []).forEach(function(t) {
            html += '<a class="translation-link" href="/' + t.lang + '/' + t.url + '">' +
              (t.lang == "cs" ? "Česky" : "In english") + '</a>';
          });

          html += '</div>';

          html +=
            '<time pubdate datetime="' + post.date + '">' + post.date.getDate() + '/' + (post.date.getMonth() + 1) + '/' +
              post.date.getFullYear() + '</time>' +
            '</div>';

          postsDiv.innerHTML += html;
        }
      });
    };

    function filterCollection(arr) {
      return arr.filter(p => params.collections.includes(p.collection));
    }

    function sortPosts(query) {
      if (!query)
        return filterCollection(posts).sort(function(a, b) {
          return b.date - a.date;
        });
      return fuzzysort.goAsync(query, filterCollection(postsSearchable), { keys: ["title", "subtitle", "langFull", "locale", "collection", "tags"] });
    }

    function onSearch() {
      var promiseOrArr = sortPosts(searchbox.value);

      if (promiseOrArr instanceof Promise)
        promiseOrArr
          .then(function(sorted) {
            render(sorted.filter(Boolean).sort(function(a, b) {
              return b.score - a.score;
            }));
          }).catch(function(err) {
            throw err;
          });
      else
        render(promiseOrArr);
    }

    onSearch();

    searchbox.oninput = onSearch;
  </script>

  

  <noscript>
     
    <div class="post-link">
      

      <a href="/en/poetry/abc/">
        <span class="title">abc</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Tue, 01 Jun 2021 00:00:00 GMT">1/6/2021</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang">cs</span>
      

      <a href="/cs/poezie/o-nezachytitelnosti-pravidel-prirodnich-jazyku/">
        <span class="title">O Nezachytitelnosti Pravidel Přírodních Jazyků</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Tue, 01 Jun 2021 00:00:00 GMT">1/6/2021</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang">cs</span>
      

      <a href="/cs/poezie/krehky-dvojnik/">
        <span class="title">Křehký dvojník</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Tue, 01 Jun 2021 00:00:00 GMT">1/6/2021</time>
    </div>
    
     
    <div class="post-link">
      

      <a href="/en/articles/poetry-in-html/">
        <span class="title">Poetry in HTML</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Fri, 07 May 2021 00:00:00 GMT">7/5/2021</time>
    </div>
    
     
    <div class="post-link">
      

      <a href="/en/articles/j-letter-combinations/">
        <span class="title">Calculating possible letter combinations in J</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Wed, 14 Apr 2021 00:00:00 GMT">14/4/2021</time>
    </div>
    
     
     
    <div class="post-link">
      

      <a href="/en/prose/informed-decision/">
        <span class="title">Informed Decision</span>
      </a>

      

      <div>
         
        <a class="translation-link" href="/cs/proza/informovane-rozhodnuti">Česky</a>
         
      </div>

      <time pubdate datetime="Sat, 03 Apr 2021 00:00:00 GMT">3/4/2021</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang">cs</span>
      

      <a href="/cs/poezie/enestejza/">
        <span class="title">Enestejža</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Fri, 26 Mar 2021 00:00:00 GMT">26/3/2021</time>
    </div>
    
     
    <div class="post-link">
      

      <a href="/en/poetry/capitol/">
        <span class="title">Capitol</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Thu, 07 Jan 2021 00:00:00 GMT">7/1/2021</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang">cs</span>
      

      <a href="/cs/poezie/jeden-dva/">
        <span class="title">Jeden-dva</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Thu, 17 Dec 2020 00:00:00 GMT">17/12/2020</time>
    </div>
    
     
    <div class="post-link">
      

      <a href="/en/poetry/skyscraper/">
        <span class="title">Skyscraper</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Mon, 07 Dec 2020 00:00:00 GMT">7/12/2020</time>
    </div>
    
     
    <div class="post-link">
      

      <a href="/en/poetry/homunculus/">
        <span class="title">Homunculus</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Fri, 08 May 2020 00:00:00 GMT">8/5/2020</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang"></span>
      

      <a href="/">
        <span class="title"></span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Thu, 01 Jan 1970 00:00:00 GMT">1/1/1970</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang"></span>
      

      <a href="/en/prose/">
        <span class="title">Prose</span>
      </a>

      

      <div>
         
        <a class="translation-link" href="/cs/proza">Česky</a>
         
      </div>

      <time pubdate datetime="Thu, 01 Jan 1970 00:00:00 GMT">1/1/1970</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang"></span>
      

      <a href="/en/posts/">
        <span class="title">Posts</span>
      </a>

      

      <div>
         
        <a class="translation-link" href="/cs/posty">Česky</a>
         
      </div>

      <time pubdate datetime="Thu, 01 Jan 1970 00:00:00 GMT">1/1/1970</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang"></span>
      

      <a href="/en/poetry/">
        <span class="title">Poetry</span>
      </a>

      

      <div>
         
        <a class="translation-link" href="/cs/poezie">Česky</a>
         
      </div>

      <time pubdate datetime="Thu, 01 Jan 1970 00:00:00 GMT">1/1/1970</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang"></span>
      

      <a href="/en/">
        <span class="title">Welcome Home</span>
      </a>

      

      <div>
         
        <a class="translation-link" href="/cs/">Česky</a>
         
      </div>

      <time pubdate datetime="Thu, 01 Jan 1970 00:00:00 GMT">1/1/1970</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang"></span>
      

      <a href="/en/articles/">
        <span class="title">Articles</span>
      </a>

      

      <div>
         
        <a class="translation-link" href="/cs/clanky">Česky</a>
         
      </div>

      <time pubdate datetime="Thu, 01 Jan 1970 00:00:00 GMT">1/1/1970</time>
    </div>
    
     
    <div class="post-link">
      
      <span class="lang"></span>
      

      <a href="/en/about/">
        <span class="title">About</span>
      </a>

      

      <div>
         
        <a class="translation-link" href="/cs/about">Česky</a>
         
      </div>

      <time pubdate datetime="Thu, 01 Jan 1970 00:00:00 GMT">1/1/1970</time>
    </div>
    
     
     
     
     
     
     
     
    <div class="post-link">
      
      <span class="lang"></span>
      

      <a href="/404.html">
        <span class="title">Error 404</span>
      </a>

      

      <div>
        
      </div>

      <time pubdate datetime="Thu, 01 Jan 1970 00:00:00 GMT">1/1/1970</time>
    </div>
    
    
  </noscript>
</div>

  </main>

  <footer>
    

    <a href="#top">
      Back to top
    </a>
  </footer>
</body>

</html>
